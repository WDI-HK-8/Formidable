app.controller('ListFormsCtrl', ['$scope', '$http','$auth','$location', function($scope, $http, $auth, $location){
  
  url = "<%= ENV['URL'] %>" || 'http://localhost:3000'

  $scope.noForms = false;
  $scope.user = '';
  $auth.validateUser().then(function(response) {
    $scope.user = response
    $http.get(url + '/users/' + $scope.user.id + '/forms').success(function(resp) {
      $scope.forms = resp;
      if(!resp.length) {
        $scope.noForms = true;
      }
    });
  }).catch(function(response) {
    console.log(response);
  });

  $scope.form = {};
  $scope.createForm = function() {
    $http.post(url + '/users/' + $scope.user.id + '/forms',$scope.form).success(function(response) {
      console.log(response)
      $location.path('forms/' + response.id + '/edit');
    }).error(function(response){
      alert("write something you douche");
    });
  }

}]);