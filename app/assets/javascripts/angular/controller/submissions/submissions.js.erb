app.controller('SubmissionsIndexCtrl', ['$scope', '$http','$auth','$location','$routeParams','$rootScope', function($scope, $http, $auth, $location, $routeParams, $rootScope){
  
  $rootScope.title = 'Analyze';

  url = "<%= ENV['URL'] %>" || 'http://localhost:3000'

  $http.get(url + '/forms/' + $routeParams.id).success(function(response) {
    $scope.form = response
    $http.get(url + '/forms/' + $scope.form.id + '/submissions').success(function(response) {
      console.log(response)
      $scope.submissions = response;
      $scope.answers = $scope.submissions[0].answers;
      // call indent function on $scope.submissions[0]
      $scope.noSubmissions = !response.length;
    });
  });

  $scope.getSubmission = function(submission) {
    $scope.answers = submission.answers
  }

  var indent = function(index) {
    //should indent the cell permanently, called once a cell is clicked
  }


}]);